app.use((err, req, res, next) => {
  logger.logError("Unhandled Exception", {
    service_name: "node-backend",
    event_type: "Error",
    user_id: req.user?.id || null,
    error_code: err.status || 500,
    failure_reason: err.message,
    source: "Node Backend",
    endpoint: req.originalUrl,
    method: req.method
  });
  res.status(500).send("Internal Server Error");
});
for the app.js
const express = require('express');
const loggerMiddleware = require('./middleware/logger');

const app = express();
app.use(express.json());
app.use(loggerMiddleware);